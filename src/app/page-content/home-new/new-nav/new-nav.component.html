<nav class="main-navigation">
  <!-- Background pattern and animated elements -->
  <div class="pattern-overlay">
    <div class="pattern-bg"></div>
  </div>
  <div class="bg-element-1"></div>
  <div class="bg-element-2"></div>
  
  <!-- Desktop Navigation Container -->
  <div class="nav-container" [class.hidden]="isMobileMenuOpen">
    <div 
      *ngFor="let item of navigationItems; let i = index" 
      class="dropdown-container"
      [class.dropdown-open]="item.dropdownOpen"
    >
      <button 
        class="nav-button"
        [class.active]="item.isActive"
        (click)="onNavItemClick(item, i)"
        [attr.aria-expanded]="item.hasDropdown ? item.dropdownOpen : null"
        [attr.aria-haspopup]="item.hasDropdown"
      >
        <span>{{ item.label }}</span>
        
        <!-- Chevron icon for dropdown items -->
        <svg 
          *ngIf="item.hasDropdown" 
          class="chevron" 
          [class]="'chevron ' + getChevronClass(item)"
          xmlns="http://www.w3.org/2000/svg" 
          viewBox="0 0 24 24" 
          fill="none" 
          stroke="currentColor" 
          stroke-width="2" 
          stroke-linecap="round" 
          stroke-linejoin="round"
        >
          <path d="m6 9 6 6 6-6"></path>
        </svg>
        
        <div class="nav-underline"></div>
      </button>
      
      <!-- Dropdown Menu -->
      <div 
        *ngIf="item.hasDropdown && item.dropdownOpen" 
        class="dropdown-menu"
        [@dropdownAnimation]
      >
        <div class="dropdown-content">
          <a 
            *ngFor="let childItem of item.children" 
            class="dropdown-item"
            (click)="onDropdownItemClick(i, childItem)"
            [attr.aria-label]="childItem.label"
          >
            {{ childItem.label }}
          </a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Mobile Menu Button -->
  <button 
    class="mobile-menu-btn" 
    aria-label="Toggle menu"
    (click)="toggleMobileMenu()"
    [class.menu-open]="isMobileMenuOpen"
  >
    <!-- Hamburger/Close icon with animation -->
    <div class="hamburger-icon">
      <span class="hamburger-line" [class.line-1-active]="isMobileMenuOpen"></span>
      <span class="hamburger-line" [class.line-2-active]="isMobileMenuOpen"></span>
      <span class="hamburger-line" [class.line-3-active]="isMobileMenuOpen"></span>
    </div>
  </button>
  
  <!-- Mobile Menu Overlay -->
  <div 
    class="mobile-menu-overlay" 
    *ngIf="isMobileMenuOpen"
    [@mobileMenuAnimation]
  >
    <div class="mobile-menu-content">
      <div 
        *ngFor="let item of navigationItems; let i = index"
        class="mobile-menu-section"
      >
        <button 
          class="mobile-nav-button"
          [class.active]="item.isActive"
          [class.has-dropdown]="item.hasDropdown"
          (click)="onNavItemClick(item, i)"
        >
          <span>{{ item.label }}</span>
          
          <!-- Chevron for mobile dropdown -->
          <svg 
            *ngIf="item.hasDropdown" 
            class="mobile-chevron"
            [class]="'mobile-chevron ' + getChevronClass(item)"
            xmlns="http://www.w3.org/2000/svg" 
            viewBox="0 0 24 24" 
            fill="none" 
            stroke="currentColor" 
            stroke-width="2" 
            stroke-linecap="round" 
            stroke-linejoin="round"
          >
            <path d="m6 9 6 6 6-6"></path>
          </svg>
        </button>
        
        <!-- Mobile Dropdown Items -->
        <div 
          *ngIf="item.hasDropdown && item.dropdownOpen" 
          class="mobile-dropdown-items"
          [@mobileDropdownAnimation]
        >
          <a 
            *ngFor="let childItem of item.children"
            class="mobile-dropdown-item"
            (click)="onDropdownItemClick(i, childItem)"
          >
            {{ childItem.label }}
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>