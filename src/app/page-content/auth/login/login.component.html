<div class="login-container">
  <div class="video-bg">
    <video autoplay muted loop playsinline class="video-bg">
      <source src="assets/videos/TirangaFlag.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  </div>
  <!-- <div class="logo-container">
    <a href="/" class="logo-link">
      <img src="../../../../assets/logo/SWAAGAT_2.0_removed-bg.png" alt="logo" class="swaagat-logo"
        width="500" height="200" />
    </a>
  </div> -->

  <div class="content-wrapper">
    <div class="signup-form">
      <!-- <a href="/">
        <img src="assets/logo/SWAAGAT2.0LogoRecreated.png" alt="logo" class="signupLogo" width="150" height="80" />
      </a> -->

      <h2 class="title"><b>Sign In</b></h2>
      <p class="subtitle">To access your dashboard and apply for approvals.</p>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="form">
        <app-ilogi-input fieldId="user_name" fieldLabel="User ID (Username / PAN / BIN)" [mandatory]="true" formControlName="user_name"
          type="text" placeholder="Enter username, PAN, or BIN">
        </app-ilogi-input>
        <small class="error-text" *ngIf="loginForm.get('user_name')?.hasError('invalid')">
          Invalid username.
        </small>

        <app-ilogi-input fieldId="password" fieldLabel="Password" [mandatory]="true" formControlName="password" type="password"
          placeholder="Enter your password">
        </app-ilogi-input>
        <small class="error-text" *ngIf="loginForm.get('password')?.hasError('invalid')">
          Invalid password.
        </small>
        <div class="captcha-wrapper">
          <canvas #captchaCanvas width="140" height="50" (click)="reloadCaptcha()" class="captcha-canvas"></canvas>
          <button type="button" class="reload-btn" (click)="reloadCaptcha()" aria-label="Reload CAPTCHA">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
              <path d="M8 3a5 5 0 1 0 4.546 2.914.5.5 0 1 1 .908-.418A6 6 0 1 1 8 2v1z" />
              <path d="M8 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0v-4A.5.5 0 0 1 8 0z" />
            </svg>
          </button>
        </div>

        <app-ilogi-input fieldId="captcha_input" fieldLabel="Enter CAPTCHA" [mandatory]="true" formControlName="captchaInput"
          type="text" placeholder="Enter the characters you see above" (input)="checkCaptcha()">
        </app-ilogi-input>
        <small class="error-text" *ngIf="loginForm.get('captchaInput')?.hasError('invalidCaptcha')">
          Invalid CAPTCHA entered. Please try again.
        </small>

        <button type="submit" class="btn-submit" [disabled]="!loginForm.valid || !captchaValid">Login</button>
        
      <div class="form-footer">
        <span class="text-left small">
          New User? <a href="/page/registration" class="register-link">Register</a>
        </span>
      
        <!-- Beautiful, prominent forgot password link -->
        <a class="forgot-link" href="/page/forgot-password" aria-label="Forgot password">Forgot Password?</a>
      </div>
      </form>
    </div>
    <div class="side-image">
      <div class="carousel">
        <div *ngFor="let image of images; let i = index" class="carousel-item" [class.active]="i === currentImageIndex"
          [class.prev]="i === previousImageIndex && i !== currentImageIndex">
          <img [src]="image" alt="slide image" />
        </div>
      </div>
    </div>
  </div>
</div>