<div class="page-wrapper">
  <!-- Background Video -->
  <video autoplay muted loop playsinline class="bg-video" aria-hidden="true">
    <source src="assets/videos/tripura-tourism-video.mp4" type="video/mp4" />
  </video>
  <div class="bg-overlay" aria-hidden="true"></div>

  <!-- Centered Card -->
  <div class="center-stage">
    <div class="auth-card">
      <div class="card">
        <div class="logo-wrapper">
          <img src="assets/logo/tripuratourismlogo.png" alt="Tripura Tourism Logo" class="logo" />
        </div>

        <h2 class="title">{{ editMode ? 'Edit Registration' : 'User Registration' }}</h2>
        <p class="subtitle">Create your account to continue</p>

        <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()" class="form">

          <!-- NAME -->
          <app-ilogi-input
            fieldId="name"
            fieldLabel="Full Name"
            [mandatory]="true"
            formControlName="name"
            placeholder="Enter your full name">
          </app-ilogi-input>

          <!-- EMAIL -->
          <app-ilogi-input
            fieldId="email_id"
            fieldLabel="Email ID"
            [mandatory]="true"
            formControlName="email_id"
            type="email"
            placeholder="Enter your email">
          </app-ilogi-input>

          <!-- MOBILE -->
          <app-ilogi-input
            fieldId="mobile_no"
            fieldLabel="Mobile Number"
            [mandatory]="true"
            formControlName="mobile_no"
            placeholder="Enter 10-digit mobile number"
            type="text">
          </app-ilogi-input>

          <small class="error-text"
            *ngIf="registrationForm.get('mobile_no')?.touched && registrationForm.get('mobile_no')?.invalid">
            Enter a valid 10-digit mobile number
          </small>

          <!-- SEND OTP -->
          <div *ngIf="registrationForm.get('mobile_no')?.valid && !otpSent" class="otp-row">
            <button type="button" class="btn-secondary" (click)="sendOtp()">Send OTP</button>
          </div>

          <!-- VERIFY OTP -->
          <div *ngIf="otpSent && !otpVerified" class="otp-row">
            <app-ilogi-input
              fieldId="otp"
              fieldLabel="OTP"
              [mandatory]="true"
              [formControl]="otpControl"
              placeholder="Enter OTP">
            </app-ilogi-input>
            <button type="button" class="btn-verify" (click)="verifyOtp()">Verify</button>
          </div>

          <!-- USERNAME -->
          <app-ilogi-input
            fieldId="user_name"
            fieldLabel="Username"
            [mandatory]="true"
            formControlName="user_name"
            placeholder="Choose a username">
          </app-ilogi-input>

          <!-- WHATSAPP -->
          <app-ilogi-input
            fieldId="whatsapp_no"
            fieldLabel="WhatsApp Number"
            [mandatory]="true"
            formControlName="whatsapp_no"
            placeholder="Enter WhatsApp number"
            type="text">
          </app-ilogi-input>

          <!-- ADDRESS -->
          <app-ilogi-input
            fieldId="registered_enterprise_address"
            fieldLabel="Address"
            [mandatory]="true"
            formControlName="registered_enterprise_address"
            placeholder="Enter your address">
          </app-ilogi-input>

          <!-- LOCATION -->
          <app-ilogi-select
            fieldId="district_id"
            fieldLabel="District"
            [mandatory]="true"
            formControlName="district_id"
            [selectOptions]="districts">
          </app-ilogi-select>

          <app-ilogi-select
            fieldId="subdivision_id"
            fieldLabel="Subdivision"
            [mandatory]="true"
            formControlName="subdivision_id"
            [selectOptions]="subdivisions">
          </app-ilogi-select>

          <app-ilogi-select
            fieldId="ulb_id"
            fieldLabel="ULB / Block"
            [mandatory]="true"
            formControlName="ulb_id"
            [selectOptions]="ulbs">
          </app-ilogi-select>

          <!-- PASSWORD -->
          <app-ilogi-input
            fieldId="password"
            fieldLabel="Password"
            [mandatory]="true"
            formControlName="password"
            type="password"
            placeholder="Enter password">
          </app-ilogi-input>

          <app-ilogi-input
            fieldId="confirmPassword"
            fieldLabel="Confirm Password"
            [mandatory]="true"
            formControlName="confirmPassword"
            type="password"
            placeholder="Re-enter password">
          </app-ilogi-input>

          <!-- SUBMIT -->
          <button type="submit" class="btn-submit" [disabled]="!registrationForm.valid">
            {{ editMode ? 'Update' : 'Register' }}
          </button>

          <p class="login-text">
            Already registered?
            <a (click)="goToLogin()">Login</a>
          </p>
        </form>
      </div>
    </div>
  </div>
</div>
