<div class="login-container">
  <div class="video-bg">
    <video autoplay muted loop playsinline class="video-bg">
      <source src="assets/videos/TirangaFlag.mp4" type="video/mp4" />
      Your browser does not support the video tag.
    </video>
  </div>

  <div class="content-wrapper">
    <div class="signup-form">
      <div class="logo-top" aria-hidden="true">
        <a href="/" class="logo-link" aria-label="Go to home">
          <img src="assets/logo/SWAAGAT2.0LogoRecreated.png" alt="Swaagat logo" class="signupLogo" />
        </a>
      </div>

      <h2 class="title"><b>Forgot Password</b></h2>
      <p class="subtitle">Enter PAN to receive an OTP.</p>

      <!-- main form bound to your TS `form` FormGroup -->
      <form [formGroup]="form" (ngSubmit)="onPrimaryClick()" class="form">
        <!-- STEP: enter PAN + mobile -->
        <div class="form-step" [class.hidden]="step !== 'enter'">
          <app-ilogi-input fieldId="pan" fieldLabel="PAN Number" [mandatory]="true" formControlName="pan" type="text"
            placeholder="Enter PAN (e.g. ABCDE1234F)">
          </app-ilogi-input>
          <small class="error-text" *ngIf="form.get('pan')?.touched && form.get('pan')?.invalid">
            Please enter a valid PAN.
          </small>

          <!-- <app-ilogi-input
            fieldId="mobile"
            fieldLabel="Mobile Number"
            [mandatory]="true"
            formControlName="mobile"
            type="text"
            placeholder="Enter 10-digit mobile number">
          </app-ilogi-input>
          <small class="error-text" *ngIf="form.get('mobile')?.touched && form.get('mobile')?.invalid">
            Please enter a valid 10-digit mobile number.
          </small> -->
        </div>

        <!-- STEP: verify OTP -->
        <div class="form-step" [class.hidden]="step !== 'verify'">
          <!-- <p class="muted">OTP sent to <strong>{{ sentToMasked }}</strong></p> -->
          <p class="muted small"><strong>{{ infoMessage }}</strong></p>

          <app-ilogi-input fieldId="otp" fieldLabel="Enter OTP" [mandatory]="true" formControlName="otp" type="text"
            placeholder="Enter the OTP">
          </app-ilogi-input>
          <small class="error-text" *ngIf="form.get('otp')?.touched && form.get('otp')?.invalid">
            Enter the {{ otpLength }}-digit OTP.
          </small>

          <div class="otp-row">
            <!-- <div class="timer" *ngIf="otpTimerSeconds > 0">
              Retry in <span class="countdown">{{ otpTimerDisplay }}</span>
            </div> -->

            <button type="button" class="resend-btn" [class.disabled]="!isResendEnabled" [disabled]="!isResendEnabled"
              (click)="resendOtp()">
              {{ isResendEnabled ? 'Resend OTP' : 'Resend (disabled)' }}
            </button>
          </div>
        </div>

        <!-- STEP: reset password -->
        <div class="form-step" [class.hidden]="step !== 'reset'">
          <p class="muted small" [class.success-message]="step === 'reset'">{{ infoMessage }}</p>

          <app-ilogi-input fieldId="newPassword" fieldLabel="New Password" [mandatory]="true"
            formControlName="newPassword" type="password" placeholder="Minimum 6 characters">
          </app-ilogi-input>
          <small class="error-text" *ngIf="form.get('newPassword')?.touched && form.get('newPassword')?.invalid">
            Password must be at least 6 characters.
          </small>

          <app-ilogi-input fieldId="confirmPassword" fieldLabel="Confirm Password" [mandatory]="true"
            formControlName="confirmPassword" type="password" placeholder="Confirm new password">
          </app-ilogi-input>
          <small class="error-text"
            *ngIf="form.get('confirmPassword')?.touched && form.get('confirmPassword')?.invalid">
            Please confirm your password.
          </small>
        </div>

        <div class="form-actions">
          <button type="button" class="btn-submit" (click)="onPrimaryClick()" [disabled]="isLoading">
            <span *ngIf="!isLoading">{{ primaryLabel }}</span>
            <span *ngIf="isLoading" class="btn-spinner" aria-hidden="true"></span>
          </button>

          <a class="text-center small link-back" (click)="backToLogin()">Back to Login</a>
        </div>
      </form>
    </div>

    <div class="side-image">
      <div class="carousel">
        <div *ngFor="let image of images; let i = index" class="carousel-item" [class.active]="i === currentImageIndex"
          [class.prev]="i === previousImageIndex && i !== currentImageIndex">
          <img [src]="image" alt="slide image" />
        </div>
      </div>
    </div>
  </div>
</div>