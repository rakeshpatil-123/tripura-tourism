

@if(isLoading){
  <app-loader></app-loader>
}@else{<div class="dashboard-page">
  <div class="dashboard-header">
    <p class="subtitle">Welcome to the</p>
    <h1>Dashboard</h1>
  </div>

  <!-- Summary Cards Section -->
  <section class="dashboard-section">
    <app-summary-cards></app-summary-cards>
  </section>

  <!-- Charts Section -->
  <section class="dashboard-section charts-section">
    <!-- <div class="charts-grid">
      <div class="chart-item">
        <app-bar-chart></app-bar-chart>

      </div>
      <div class="chart-item">
        <app-pie-chart></app-pie-chart>
      </div>
    </div> -->
    <app-line-chart></app-line-chart>
  </section>
  <section class="dashboard-section charts-section">
    <app-bar-chart></app-bar-chart>

  </section>
  <section class="dashboard-section charts-section">
    <div class="table-h">
      <p class=""> Clarification Raised </p>
     <div class="filter">
  <app-ilogi-select
    fieldLabel="Service"
    fieldId="clarificationService"
    [(ngModel)]="clarificationService"
    name="clarificationService"
    [selectOptions]="clarificationServiceOptions"
    placeholder="Select Service"
    [mandatory]="false"
    [readonly]="false">
  </app-ilogi-select>

  <app-ilogi-select
    fieldLabel="Application Number"
    fieldId="clarificationAppNumber"
    [(ngModel)]="clarificationAppNumber"
    name="clarificationAppNumber"
    [selectOptions]="clarificationAppNumberOptions"
    placeholder="Select Application"
    [mandatory]="false"
    [readonly]="false">
  </app-ilogi-select>
</div>
      <app-dynamic-table [data]="filteredClarificationRequired" [columns]="columns" [searchable]="false"
        [showPagination]="true" [pageSize]="5"></app-dynamic-table>
    </div>
  </section>
  <section class="dashboard-section charts-section">
    <div class="filter ">

      <app-ilogi-select fieldLabel="Service " fieldId="service" [(ngModel)]="service" name="applicationType"
        [selectOptions]="serviceOptions" placeholder="Select Type" [mandatory]="false" [readonly]="false">
      </app-ilogi-select>
      <app-ilogi-select fieldLabel="Application Id" fieldId="applicationId" [(ngModel)]="applicationId"
        name="applicationType" [selectOptions]="applicationIdOptions" placeholder="Select Type" [mandatory]="false"
        [readonly]="false">
      </app-ilogi-select>
    </div>
    <div class="payments-container">
      <div class="section">
        <h2 class="section-title">Payments Pending (UNPAID)</h2>

        <div class="table-wrapper">
          <table class="payment-table">
            <thead>
              <tr>
                <th>
                  <!-- <input type="checkbox" [checked]="isAllSelected()"
                [disabled]="pendingPayments.length > 5 && maxSelectionReached && !isAllSelected()"
                (change)="toggleAllSelection()" /> -->
                  Select
                </th>
                <th>SL No</th>
                <th>Service Name</th>
                <th>Application Number</th>
                <th>Application Date</th>
                <th>Payment Type<br>(Application Fee Payment/Extra Payment Raised)</th>
                <th>Status</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let payment of filteredPendingPayments">

                <td>
                  <input type="checkbox" [checked]="isSelected(payment.user_service_application_id)"
                    [disabled]="!isSelected(payment.user_service_application_id) && maxSelectionReached"
                    (change)="toggleSelection(payment.user_service_application_id)" />
                </td>
                <td>{{ payment.slNo }}</td>
                <td>{{ payment.serviceName }}</td>
                <td>{{ payment.applicationId }}</td>
                <td>{{ payment.applicationDate }}</td>
                <td>{{ payment.paymentType }}</td>
                <td>{{ payment.status }}</td>
                <td>₹{{ payment.amount }}</td>
              </tr>
              <!-- <tr *ngIf="paginatedPendingPayments.length === 0">
                <td colspan="8" class="no-data">No pending payments found.</td>
              </tr> -->
            </tbody>
          </table>
        </div>

        <div class="pagination-footer">
          <div class="pagination-controls">
            <div class="page-size-selector">
              <label>Show:</label>
              <select [value]="itemsPerPagePending" (change)="onPageSizeChangePending($event)">
                <option *ngFor="let size of pageSizes" [value]="size">{{ size }}</option>
              </select>
              <span>per page</span>
            </div>
          </div>
          <div class="pagination-info">
            Page {{ currentPagePending }} of {{ totalPagesPendingCalculated }}
          </div>
          <div class="pagination-controls">
            <button class="pagination-btn" [disabled]="currentPagePending === 1" (click)="prevPagePending()">
              &laquo; Previous
            </button>
            <button class="pagination-btn" [disabled]="currentPagePending === totalPagesPendingCalculated"
              (click)="nextPagePending()">
              Next &raquo;
            </button>
          </div>
        </div>

        <div class="footer-bar">
          <div class="total-amount">
            <strong>Total Amount Selected for Payment:</strong> ₹{{ totalSelectedAmount }}
          </div>
          <button class="pay-now-btn" [disabled]="selectedPayments.size === 0" (click)="payNow()">
            Pay Now
          </button>
        </div>
      </div>



    </div>
  </section>


</div>
}