<div class="profile-page">
  <div class="profile-card shadow">
  <p-tabs value="0" class="custom-tabs">
    <p-tablist>
      <p-tab value="0">Profile</p-tab>
      <p-tab value="1">Change Password</p-tab>
    </p-tablist>
    <p-tabpanels>
      <p-tabpanel value="0">
        <form [formGroup]="profileForm" class="profile-form">
        <div class="profile-fields">
         <app-ilogi-input fieldLabel="Enterprise Name" formControlName="enterpriseName"></app-ilogi-input>
              <app-ilogi-input fieldLabel="First Name" formControlName="firstName"></app-ilogi-input>
              <app-ilogi-input fieldLabel="Last Name" formControlName="lastName"></app-ilogi-input>
              <app-ilogi-input fieldLabel="Email" type="email" formControlName="email"></app-ilogi-input>
              <app-ilogi-input fieldLabel="Phone" type="number" formControlName="phone"></app-ilogi-input>
              <app-ilogi-input fieldLabel="Address" type="textarea" formControlName="address"></app-ilogi-input>
              <app-ilogi-input fieldLabel="City" formControlName="city"></app-ilogi-input>
              <app-ilogi-input fieldLabel="User Type" [disabled]="true" formControlName="userType"></app-ilogi-input>

              <app-ilogi-select class="mb-10" fieldId="department_id" fieldLabel="Department" [mandatory]="true"
                formControlName="department_id" [selectOptions]="departments" placeholder="Select department">
              </app-ilogi-select>

              <app-ilogi-select fieldId="hierarchy_level" fieldLabel="Hierarchy Level" formControlName="hierarchy_level"
                [selectOptions]="hierarchyLevels" placeholder="Select hierarchy level">
              </app-ilogi-select>

              <app-ilogi-select *ngIf="shouldShow('district')" fieldId="district_code" fieldLabel="District"
                formControlName="district_code" [selectOptions]="districts" placeholder="Select district"
                [disabled]="loadingDistricts">
              </app-ilogi-select>

              <app-ilogi-select *ngIf="shouldShow('subdivision')" fieldId="subdivision_code" fieldLabel="Subdivision"
                formControlName="subdivision_code" [selectOptions]="subdivisions" placeholder="Select subdivision"
                [disabled]="!districts.length || loadingSubdivisions">
              </app-ilogi-select>

              <app-ilogi-select *ngIf="shouldShow('block')" fieldId="ulb_code" fieldLabel="ULB"
                formControlName="ulb_code" [selectOptions]="ulbs" placeholder="Select ULB"
                [disabled]="!subdivisions.length || loadingUlbs">
              </app-ilogi-select>

              <app-ilogi-select *ngIf="shouldShow('ward')" fieldId="ward_code" fieldLabel="Ward"
                formControlName="ward_code" [selectOptions]="wards" placeholder="Select Ward"
                [disabled]="!ulbs.length || loadingWards">
              </app-ilogi-select>

              <div class="form-actions">
                <button type="button" class="btn btn-primary" [disabled]="!isProfileChanged || profileForm.invalid"
                  (click)="updateProfile()">
                  Update
                </button>
              </div>
            </div>
          </form>
        </p-tabpanel>
        <p-tabpanel value="1">
          <form class="change-password" [formGroup]="passwordForm">
            <app-ilogi-input fieldLabel="Current Password" type="password" formControlName="currentPassword">
        </app-ilogi-input>

        <app-ilogi-input fieldLabel="New Password" type="password" formControlName="newPassword">
        </app-ilogi-input>

        <app-ilogi-input fieldLabel="Confirm Password" type="password" formControlName="confirmPassword">
        </app-ilogi-input>
            <span
              *ngIf="passwordForm.value.newPassword && passwordForm.value.newPassword !== passwordForm.value.confirmPassword"
              class="warn">
              Make sure your passwords match
            </span>
            <div class="form-actions">
          <button type="button" class="btn btn-primary" (click)="changePassword()"
            [disabled]="passwordForm.invalid || passwordForm.value.newPassword !== passwordForm.value.confirmPassword">
            Change Password
          </button>
        </div>
      </form>
      </p-tabpanel>
    </p-tabpanels>
  </p-tabs>
</div>
</div>