<div class="swgt-container page-card">
  <div class="page-header">
    <h1 class="page-head">Application List</h1>
  </div>

  <div class="search-filters-container">
    <form (ngSubmit)="onSearch()" class="filters-form">
      <div class="filters-grid">
        <div class="filter-item mb-10">
          <app-ilogi-input-date fieldLabel="Application Date From" fieldId="fromDate" [(ngModel)]="fromDate"
            name="fromDate" [monthsRange]="24" [allowFutureDates]="false" placeholder="DD-MM-YYYY" [mandatory]="false"
            [readonly]="false">
          </app-ilogi-input-date>
        </div>

        <div class="filter-item">
          <app-ilogi-select fieldLabel="Department" fieldId="department" [(ngModel)]="department" name="department"
            [selectOptions]="departmentOptions" placeholder="Select Department" [mandatory]="false" [readonly]="false">
          </app-ilogi-select>
        </div>


        <div class="filter-item">
          <app-ilogi-select fieldLabel="Application Type" fieldId="applicationType" [(ngModel)]="applicationType"
            name="applicationType" [selectOptions]="applicationTypeOptions" placeholder="Select Type"
            [mandatory]="false" [readonly]="false">
          </app-ilogi-select>
        </div>
        <div class="filter-actions">
          <app-button label="Search" type="primary" (click)="onSearch()" class="me-2 ">Search</app-button>
          <app-button label="Reset" type="outline" (click)="onReset()" class="">Reset</app-button>
        </div>

      </div>
      <div class="filter-row">


          <app-ilogi-select fieldId="serviceName" fieldLabel="Service" [(ngModel)]="selectedServiceName" name="serviceName"
          [selectOptions]="serviceFilterOptions" placeholder="Select Service" [mandatory]="false" [readonly]="false"
          (ngModelChange)="onSearch()">
        </app-ilogi-select>
      </div>

    </form>
    <hr class="" />
  </div>
  <div class="px-3">
    <ng-container *ngIf="loading; else contentBlock">
      <div class="loading-overlay">
        <div class="spinner"></div>
        <div class="loading-text">Loading applications...</div>
      </div>
    </ng-container>
    <ng-template #contentBlock>
      <ng-container *ngIf="filteredData.length > 0; else noDataBlock">
        <app-dynamic-table [data]="filteredData" [columns]="ApplicationColumns" [searchable]="true" [pageSize]="5"
          [showPagination]="true" (rowAction)="onRowAction($event)">
        </app-dynamic-table>
      </ng-container>

      <ng-template #noDataBlock>
        <div class="no-data-container">
          <div class="no-data-card">
            <div class="no-data-emoji">ðŸ“­</div>
            <h3>{{ noDataMessage }}</h3>
            <p class="muted">Try adjusting filters or check back later.</p>
            <button class="refresh-btn" (click)="getApplications()">Reload</button>
          </div>
        </div>
      </ng-template>
    </ng-template>
  </div>
</div>