<section class="bar-graph-wrap" role="region" aria-label="Average approval time per service">
  <header class="bg-header">
    <h3 class="title">Average Approval Time (days) â€” per Service</h3>
  </header>
  <div class="bars-list" *ngIf="items && items.length; else noData">
    <ng-container *ngFor="let it of items; let i = index">
      <div class="bar-row" tabindex="0" role="button"
        aria-label="{{ it.service_name }}: {{ it.avg_approval_days }} days"
        (keydown)="onKeyPress($event, $any($event.currentTarget))" [style.transitionDelay]="it.delayMs + 'ms'">
        <div class="left">
          <div class="service-name" title="{{ it.service_name }}">{{ it.service_name }}</div>
        </div>
        <div class="right">
          <div class="bar-outer" [attr.data-pct]="it.pct" [style.--target-width]="it.pct + '%'"
            [style.transitionDelay]="it.delayMs + 'ms'">
            <div class="bar-inner" aria-hidden="true">
              <div class="bar-fill" aria-hidden="true" [style.width]="it.pct + '%'"
                [style.transitionDelay]="it.delayMs + 'ms'"></div>

              <div class="bar-shimmer" aria-hidden="true" [style.transitionDelay]="(it.delayMs + 200) + 'ms'"></div>
            </div>

            <div class="bar-value" id="bar-value-{{it.service_id}}" aria-hidden="false">0d</div>
          </div>
        </div>
      </div>
    </ng-container>
  </div>

  <ng-template #noData>
    <div class="no-data">No approval-time data available.</div>
  </ng-template>
</section>